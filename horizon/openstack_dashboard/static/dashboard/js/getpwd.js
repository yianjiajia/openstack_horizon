/*  找回密码   */var is_exsit=0;mobile_check='ok';	$(function(){		//1: 验证手机/email格式，2:验证验证码是否相同，3: 验证该账户是否存在		$("#goto_step_two").click(function(){			NoneError=1;			val=$("#inputVal").val();			yzm=$("#yzm").val();			haserror=0			type=''						   //验证码验证：			  var inputCode = $("#yzm").val();			  inputCode=inputCode.toLocaleLowerCase();			  if (inputCode.length <= 0) {				 $("#yzm").focus();				 ErrorInput('yzm','请输入验证码');				 $("#yzmError").parent().parent().parent().addClass('has-error')					 return false;			  }else{				   $.get(real_url+"member/checkCode/?code="+inputCode,function(data){					   data=eval("("+data+")")					   if(data.status!='OK'){							 error=data.error							 $("#checkCode img").click();							 $("#yzm").focus();							 ErrorInput('yzm',error);							 $("#yzmError").parent().parent().parent().addClass('has-error')								 return false;						}else if(val==''){							ErrorInput('inputVal','账户信息不能为空');							}else if(is_exsit==1){								show();								}else{						         ErrorInput('inputVal','请输入正确的手机或邮箱')						        }				  })	  			  }						})						$("#inputVal").blur(function(){			NoneError=1;			val=$("#inputVal").val();			if(val==''){				ErrorInput('inputVal','账户信息不能为空')				 }else if(checkPhone(val)){					 is_exsit=checkExsit_user('mobile='+val,'inputVal');				}else{					ErrorInput('inputVal','请输入正确的手机')					return false;					}						});			$(".back-step-one,#back-step-one").click(function(){					$("#page-bread").find("a").removeClass('yellow');				$(".breadItem #bread1").addClass('yellow');				$("checkItem").hide()				$("#step2").hide();				$("#step1").show()							});			$("#back-step-two").click(function(){				show()				$("#step3").hide();								})			$("#goto-step-three").click(function(){				mobile_yzm=$.trim($("#mobile_yzm").val());				if(mobile_yzm==''){			        ErrorInput("mobile_yzm",fromError['mobile_yzm']['empty']);					return false;			    }else{					$.get(real_url+"member/checkMsg/?msg="+mobile_yzm+"&inputsafeToken="+safeToken ,function(data){					   data=eval("("+data+")")					   if(data.status!='OK'){							    ErrorInput("mobile_yzm",data.error);							    return false;						   }else{								$("checkItem").hide()								$("#step2").hide();									$("#page-bread").find("a").removeClass('yellow');								$("#bread3").addClass('yellow');								$("#step3").show();	 								ErrorDel('mobile_yzm');			               } 					})							 	 } 				});			//验证密码			$("#savepwd").click(function(){				param="";				password=$("#password").val();				if(password==""){					ErrorInput("password",fromError['password']['empty']);					return false;					}								mobile=$.trim($("#mobile").val())				param="mobile="+mobile				param+="&password="+password				param+="&inputsafeToken="+safeToken						$.get(real_url+"member/updateUser/?"+param,function(data){					   data=eval("("+data+")")					   if(data.status=='OK'){							  $("#user_name").text(data.user.name);							  $("#user_mobile").text(data.user.mobile);							  $("#user_email").text(data.user.email);						      $("#page-subject,#page-bread,#step3").hide();						      $("#update-sucess,#result").show();						}else if(data.error=='limitVisit'){							ErrorInput(items,'非法的访问');							}							else if(data.error=='safeTokenTimeout'){							ErrorInput(items,'安全验证失效,请重新刷新找密码页面');							}							else if(data.error=='safeTokenError'){							ErrorInput(items,'安全验证失败,请重新刷新找密码页面');							}						else{							  ErrorInput("password",'密码修改失败');						}          		})								})					})function show(){	$(".checkItem,.breadItem,#step1").hide()	val=$("#inputVal").val()	$("#page-bread").find("a").removeClass('yellow');	$(".breadItem #bread2").addClass('yellow');    $("#mobile").val(val);    $(".mobileCheck,#mobileBread").show();		$("#step2").show()}function checkExsit_user(param,items){	     if(param!=''){			 param+="&inputsafeToken="+safeToken			  $.get(real_url+"member/checkUser/?"+param,function(data){               if(data=='Exist'){				       is_exsit=1					   ErrorDel(items)					   return false;   				   }else if(data=='limitVisit'){					   is_exsit=0					   ErrorInput(items,'非法的访问');					   return true;					   }					   else if(data=='safeTokenTimeout'){						   is_exsit=0					   ErrorInput(items,'安全验证失效,请重新刷新注册页面');					   return true;					   }else if(data=='safeTokenError'){						   is_exsit=0					   ErrorInput(items,'安全验证失败,请重新刷新注册页面');					   return true;					   }else{					   ErrorInput(items,'该用户不存在');					   is_exsit=0					   return true;					   }          })		}	}